// Generated by CoffeeScript 1.3.3
(function() {
  var app;

  app = angular.module("4real.services", []);

  app.factory('isMobile', function($window) {
    return function() {
      if ($window.innerWidth < 700) {
        return true;
      }
      return false;
    };
  });

  app.factory("socket", function($rootScope) {
    var socket;
    socket = io.connect('/', {
      'sync disconnect on unload': true
    });
    window.ononbeforeunload = function() {
      socket.disconnect();
      return console.log('disconnect');
    };
    window.onload = function() {
      socket.socket.reconnect();
      return console.log('reconnect');
    };
    return {
      on: function(eventName, callback) {
        return socket.on(eventName, function() {
          var args;
          args = arguments;
          return $rootScope.$apply(function() {
            return callback.apply(socket, args);
          });
        });
      },
      emit: function(eventName, data, callback) {
        return socket.emit(eventName, data, function() {
          var args;
          args = arguments;
          return $rootScope.$apply(function() {
            if (callback) {
              return callback.apply(socket, args);
            }
          });
        });
      }
    };
  });

  app.factory("exchange", [
    '$rootScope', '$http', function($rootScope, $http) {
      return {
        getRates: function(callback) {
          return $http({
            method: "GET",
            url: "http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%3D%22%20EURUSD%2CRUBUSD%2CGBPUSD%2CJPYUSD%2CCNYUSD%22&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback="
          }).success(function(data) {
            return callback(data.query);
          }).error(function() {
            return console.log("error getting exchange rates");
          });
        }
      };
    }
  ]);

  app.factory("btcHistory", [
    '$rootScope', '$http', function($rootScope, $http) {
      return {
        getHistory: function(callback) {
          return $http({
            method: 'GET',
            url: 'https://data.mtgox.com/api/2/BTCUSD/money/trades/fetch'
          }).success(function(data, status, headers, config) {
            return callback(data.data);
          }).error(function(data, status, headers, config) {
            return console.log('error geting historical data');
          });
        }
      };
    }
  ]);

  app.factory("siteMap", [
    function() {
      var data;
      return data = {
        main: {
          title: "4real Digital Agency",
          description: "4real is a digital agency specializing in designing and building scalable technology-driven websites & apps. The company 4REAL aims to re-envision digital spaces and reformulate communication-interaction channels. The fusion of technological and creative resources lends to the development of agile software and integrated design. Although based in New York, 4REAL remains a global enterprise, with offices in Moscow, along with designers and programmers team members in London and Berlin."
        },
        about: {
          title: "4real - About",
          description: "4real offers consultancy and expertise with a keen sense of global culture, 4REAL creates online experiences that span a variety of digital environments, including video, mobile, 3D, sound, and modular. The traditional gaps between user and brand, art and consumption, culture and commerce - these are spaces where technology can create wholly new cultural experiences for users. 4REAL creates integrated online systems, across an array of digital platforms, that facilitate a deeper two-way exchange between brands and consumers."
        }
      };
    }
  ]);

  app.factory('projectsService', [
    function() {
      var amazonUrl, data;
      amazonUrl = "https://s3-us-west-2.amazonaws.com/4real/projects/";
      data = [
        {
          title: 'DIS Images',
          description: '',
          url: 'http://disimages.com',
          img: [
            {
              url: amazonUrl + 'disimages.jpg'
            }
          ],
          iphone: []
        }, {
          title: 'Gifpumper',
          description: 'realtime 3d collage platform',
          url: 'http://gifpumper.com',
          img: [
            {
              url: amazonUrl + 'gifpumper.jpg'
            }
          ],
          iphone: []
        }, {
          title: 'Kehinde Wiley Studio',
          description: 'website for artist Kehinde Wiley',
          url: 'http://kehindewiley.com',
          img: [
            {
              url: amazonUrl + 'kehindewiley.jpg'
            }
          ],
          iphone: [
            {
              url: amazonUrl + 'kwphone.png'
            }
          ]
        }, {
          title: 'TWAAS',
          description: 'Website for Thea Westreich art advisory services',
          url: '',
          img: [
            {
              url: amazonUrl + 'twaas.jpg'
            }
          ],
          tablet: [],
          iphone: [
            {
              url: amazonUrl + 'twaasphone.png'
            }
          ]
        }, {
          title: 'Walmart at 50',
          description: 'platform for users to upload their walmart stories',
          url: 'http://walmartat50.org',
          img: [
            {
              url: amazonUrl + 'walmart.jpg'
            }
          ],
          iphone: []
        }, {
          title: 'David Lewis Gallery',
          description: '',
          url: 'http://davidlewisgallery.com',
          img: [
            {
              url: amazonUrl + 'davidlewis.jpg'
            }
          ],
          iphone: [
            {
              url: amazonUrl + 'dlphone.png'
            }
          ]
        }, {
          title: 'The Digit',
          description: 'Augmented Reality App',
          url: 'http://balasan.net/thedigit/',
          img: [
            {
              url: amazonUrl + 'digit.jpg'
            }
          ],
          iphone: [
            {
              url: amazonUrl + "digitphone2.png"
            }
          ]
        }
      ];
      return {
        projects: data
      };
    }
  ]);

}).call(this);
